<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduTrack - Smart Attendance System</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dark-mode">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="logo">
                <i class="fas fa-calendar-check"></i>
                <span>EduTrack</span>
            </div>
            <div class="loading-spinner"></div>
            <p>Loading your attendance dashboard...</p>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="page active">
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="logo">
                        <i class="fas fa-calendar-check"></i>
                        <span>EduTrack</span>
                    </div>
                    <h2>Welcome Back</h2>
                    <p>Sign in to track your attendance</p>
                </div>
                
                <form id="login-form" class="login-form">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="username" placeholder="Username or ID" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password" placeholder="Password" required>
                        <button type="button" class="toggle-password" id="toggle-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button type="submit" class="login-btn">
                        <span>Sign In</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>

                <div class="login-footer">
                    <p>Don't have an account? <a href="#" id="show-setup">Setup Profile</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Setup Profile Page -->
    <div id="setup-page" class="page">
        <div class="setup-container">
            <div class="setup-card">
                <div class="setup-header">
                    <div class="logo">
                        <i class="fas fa-calendar-check"></i>
                        <span>EduTrack</span>
                    </div>
                    <h2>Setup Your Profile</h2>
                    <p>Let's get you started with your attendance tracking</p>
                </div>

                <form id="setup-form" class="setup-form">
                    <div class="form-section">
                        <h3>Personal Information</h3>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Full Name</label>
                                <input type="text" id="full-name" placeholder="Enter your full name" required>
                            </div>
                            <div class="input-group">
                                <label>Student ID</label>
                                <input type="text" id="student-id" placeholder="Enter your ID" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Account Security</h3>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Username</label>
                                <input type="text" id="setup-username" placeholder="Choose username" required>
                            </div>
                            <div class="input-group">
                                <label>Password</label>
                                <input type="password" id="setup-password" placeholder="Create password" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Academic Information</h3>
                        <div class="input-group">
                            <label>Course/Program</label>
                            <input type="text" id="course" placeholder="e.g., Computer Science" required>
                        </div>
                        <div class="input-group">
                            <label>Semester</label>
                            <select id="semester" required>
                                <option value="">Select Semester</option>
                                <option value="1">Semester 1</option>
                                <option value="2">Semester 2</option>
                                <option value="3">Semester 3</option>
                                <option value="4">Semester 4</option>
                                <option value="5">Semester 5</option>
                                <option value="6">Semester 6</option>
                                <option value="7">Semester 7</option>
                                <option value="8">Semester 8</option>
                            </select>
                        </div>
                    </div>

                    <div class="setup-actions">
                        <button type="button" id="back-to-login" class="secondary-btn">Back to Login</button>
                        <button type="submit" class="primary-btn">Complete Setup</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="page">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <button id="menu-toggle" class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">
                    <i class="fas fa-calendar-check"></i>
                    <span>EduTrack</span>
                </div>
            </div>

            <div class="header-center">
                <h1 id="current-date">Today's Attendance</h1>
            </div>

            <div class="header-right">
                <button id="theme-toggle" class="theme-toggle" title="Toggle theme">
                    <i class="fas fa-sun"></i>
                </button>
                <div class="user-menu">
    <div id="user-avatar" class="user-avatar">U</div>
    <span id="user-name">User</span>
    <div class="dropdown-menu">
        <a href="#settings-view" class="nav-dropdown-item"><i class="fas fa-cog"></i> Settings</a>
        <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
</div>
            </div>
        </header>

        <!-- Sidebar -->
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-calendar-check"></i>
                    <span>EduTrack</span>
                </div>
            </div>
            
            <ul class="nav-links">
                <li class="nav-item active">
                    <a href="#dashboard-view">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#attendance-view">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Attendance</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#subjects-view">
                        <i class="fas fa-book"></i>
                        <span>Subjects</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#analytics-view">
                        <i class="fas fa-chart-bar"></i>
                        <span>Analytics</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#settings-view">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </li>
            </ul>

            <div class="sidebar-footer">
                <div class="attendance-streak">
                    <div class="streak-count">
                        <i class="fas fa-fire"></i>
                        <span id="current-streak">0 days</span>
                    </div>
                    <p>Current Streak</p>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon present">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-present">0</h3>
                            <p>Total Present</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon absent">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-absent">0</h3>
                            <p>Total Absent</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon percentage">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="attendance-percentage">0%</h3>
                            <p>Overall Percentage</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon streak">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="best-streak">0</h3>
                            <p>Best Streak</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-content">
                    <div class="today-classes">
                        <div class="section-header">
                            <h2>Today's Classes</h2>
                            <button class="mark-all-btn" id="mark-all-present">Mark All Present</button>
                        </div>
                        <div id="today-classes-list" class="classes-list">
                            <!-- Today's classes will be populated here -->
                        </div>
                    </div>

                    <div class="quick-actions">
                        <h2>Quick Actions</h2>
                        <div class="action-buttons">
                            <button class="action-btn" id="mark-attendance-btn">
                                <i class="fas fa-check"></i>
                                <span>Mark Attendance</span>
                            </button>
                            <button class="action-btn" id="add-subject-btn">
                                <i class="fas fa-plus"></i>
                                <span>Add Subject</span>
                            </button>
                            <button class="action-btn" id="export-data-btn">
                                <i class="fas fa-download"></i>
                                <span>Export Data</span>
                            </button>
                            <button class="action-btn" id="import-data-btn">
                                <i class="fas fa-upload"></i>
                                <span>Import Data</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <h2>Recent Activity</h2>
                    <div id="activity-feed" class="activity-feed">
                        <!-- Activity feed will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Attendance View -->
            <div id="attendance-view" class="content-section">
                <div class="attendance-header">
                    <h2>Attendance Calendar</h2>
                    <div class="attendance-controls">
                        <button id="prev-month" class="month-nav">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span id="current-month-year">October 2024</span>
                        <button id="next-month" class="month-nav">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <select id="subject-filter" class="subject-filter">
                            <option value="all">All Subjects</option>
                        </select>
                    </div>
                </div>

                <div class="calendar-container">
                    <div class="calendar-header">
                        <div class="day-header">Sun</div>
                        <div class="day-header">Mon</div>
                        <div class="day-header">Tue</div>
                        <div class="day-header">Wed</div>
                        <div class="day-header">Thu</div>
                        <div class="day-header">Fri</div>
                        <div class="day-header">Sat</div>
                    </div>
                    <div id="calendar-grid" class="calendar-grid">
                        <!-- Calendar will be populated here -->
                    </div>
                </div>

                <div class="attendance-legend">
                    <div class="legend-item">
                        <div class="legend-color present"></div>
                        <span>Present</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color absent"></div>
                        <span>Absent</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color holiday"></div>
                        <span>Holiday</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color cancelled"></div>
                        <span>Cancelled</span>
                    </div>
                </div>
            </div>

            <!-- Subjects View -->
            <div id="subjects-view" class="content-section">
                <div class="subjects-header">
                    <h2><i class="fas fa-book"></i> My Subjects</h2>
                    <button id="add-subject-btn-2" class="primary-btn">
                        <i class="fas fa-plus"></i> Add Subject
                    </button>
                </div>

                <div id="subjects-grid" class="subjects-grid">
                    <!-- Subject cards will be dynamically added here -->
                </div>

                <div class="timetable-section">
                    <h3><i class="fas fa-clock"></i> Weekly Timetable</h3>
                    <div class="timetable-grid">
                        <!-- Timetable content will be dynamically added here -->
                    </div>
                </div>
            </div>            <!-- Analytics View -->
            <div id="analytics-view" class="content-section">
                <div class="analytics-header">
                    <h2>Attendance Analytics</h2>
                    <div class="analytics-controls">
                        <select id="analytics-period">
                            <option value="week">This Week</option>
                            <option value="month" selected>This Month</option>
                            <option value="semester">This Semester</option>
                        </select>
                        <select id="analytics-subject">
                            <option value="all">All Subjects</option>
                        </select>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>Attendance Trend</h3>
                        <div class="chart-wrapper">
                            <canvas id="attendance-trend-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>Subject-wise Performance</h3>
                        <div class="chart-wrapper">
                            <canvas id="subject-performance-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>Daily Pattern</h3>
                        <div class="chart-wrapper">
                            <canvas id="daily-pattern-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>Attendance Distribution</h3>
                        <div class="chart-wrapper">
                            <canvas id="attendance-distribution-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="insights-section">
                    <h3>Smart Insights</h3>
                    <div id="insights-container" class="insights-container">
                        <!-- Insights will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settings-view" class="content-section">
                <div class="settings-header">
                    <h2><i class="fas fa-cog"></i> Settings & Preferences</h2>
                    <p>Customize your EduTrack experience</p>
                </div>

                <div class="settings-grid">
                    <div class="settings-section">
                        <h3><i class="fas fa-bell"></i> Notifications</h3>
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-envelope"></i>
                                Email Notifications
                            </label>
                            <div class="toggle-group">
                                <label class="toggle">
                                    <input type="checkbox" id="email-notifications" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span>Enabled</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-exclamation-triangle"></i>
                                Attendance Alert Threshold
                            </label>
                            <div class="setting-action">
                                <input type="number" id="attendance-threshold" min="0" max="100" value="75">
                                <span class="unit">%</span>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><i class="fas fa-user"></i> Profile Information</h3>
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-id-card"></i>
                                Full Name
                            </label>
                            <div class="setting-action">
                                <span id="current-full-name">John Doe</span>
                                <button type="button" class="edit-btn" data-field="fullName" onclick="openEditModal('fullName')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-fingerprint"></i>
                                Student ID
                            </label>
                            <div class="setting-action">
                                <span id="current-student-id">ST12345</span>
                                <button type="button" class="edit-btn" data-field="studentId" onclick="openEditModal('studentId')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-graduation-cap"></i>
                                Course/Program
                            </label>
                            <div class="setting-action">
                                <span id="current-course">Computer Science</span>
                                <button type="button" class="edit-btn" data-field="course" onclick="openEditModal('course')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-clock"></i>
                                Semester
                            </label>
                            <div class="setting-action">
                                <span id="current-semester">4th Semester</span>
                                <button type="button" class="edit-btn" data-field="semester" onclick="openEditModal('semester')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><i class="fas fa-paint-brush"></i> Appearance</h3>
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-palette"></i>
                                Theme
                            </label>
                            <select id="theme-select">
                                <option value="auto">System Default</option>
                                <option value="light">Light Mode</option>
                                <option value="dark" selected>Dark Mode</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-section data-management">
                        <h3><i class="fas fa-database"></i> Data Management</h3>
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-file-export"></i>
                                Export Data
                            </label>
                            <button id="export-data" class="btn primary small">
                                <i class="fas fa-download"></i> Export All Data
                            </button>
                        </div>

                        <div class="setting-item">
                            <label>
                                <i class="fas fa-file-import"></i>
                                Import Data
                            </label>
                            <div class="file-import-group">
                                <label class="file-input-label btn ghost small" for="import-file">
                                    <i class="fas fa-upload"></i> Choose File
                                </label>
                                <input type="file" id="import-file" accept=".json,.csv" class="hidden-file-input">
                                <div id="file-name" class="file-name muted">No file selected</div>
                                <button id="confirm-import-settings" class="btn primary small" style="margin-left:12px;">
                                    <i class="fas fa-file-import"></i> Import
                                </button>
                            </div>
                        </div>

                        <div class="setting-item">
                            <label>
                                <i class="fas fa-file-download"></i>
                                Download Templates
                            </label>
                            <div class="template-buttons">
                                <button id="download-json-template" class="btn ghost small">
                                    <i class="fas fa-file-code"></i> JSON Template
                                </button>
                                <button id="download-csv-template" class="btn ghost small">
                                    <i class="fas fa-file-csv"></i> CSV Template
                                </button>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="info-box">
                                <i class="fas fa-info-circle"></i>
                                <p>Supported formats: JSON (recommended) and CSV. Times must be HH:MM (24-hour).</p>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section advanced-settings">
                        <h3><i class="fas fa-tools"></i> Advanced Settings</h3>
                        
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-trash-alt"></i>
                                Reset Application
                            </label>
                            <button id="reset-data" class="btn danger small">
                                <i class="fas fa-trash"></i> Reset All Data
                            </button>
                        </div>

                        <div class="setting-item">
                            <!-- <label>
                                <i class="fas fa-code"></i>
                                Data Format Examples
                            </label> -->
                            <div class="code-example-box">
                                <h5>JSON Format</h5>
                                <pre class="examples-pre"><code>{
  "timetable": [
    {
      "subject": "Data Structures",
      "faculty": "Prof. Singh",
      "day": "Monday",
      "start": "09:00",
      "end": "10:00",
      "location": "Room 101",
      "theory": {
        "hours": 3,
        "credits": 3,
        "notes": "Core theory"
      }
    },
    {
      "subject": "Artificial Intelligence Lab",
      "faculty": "Prof. Mehta",
      "day": "Wednesday",
      "start": "11:00",
      "end": "13:00",
      "location": "Lab 2",
      "practical": {
        "hours": 2,
        "lab": "Lab 2",
        "instructor": "Lab Asst"
      }
    }
  ]
}
</code></pre>
                                <h5>CSV Format</h5>
                                <pre class="examples-pre"><code>Subject,Faculty,Day,Start,End,Location
Data Structures,Prof. Singh,Monday,09:00,10:00,Room 101
Artificial Intelligence,Prof. Mehta,Wednesday,11:00,12:00,Room 202</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Mark Attendance Modal -->
    <div id="attendance-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Mark Attendance</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="attendance-options">
                    <!-- Attendance options will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add Subject Modal -->
    <div id="subject-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Subject</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="add-subject-form">
                    <div class="input-group">
                        <i class="fas fa-book"></i>
                        <input type="text" id="subject-name" placeholder="Subject Name" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-user-tie"></i>
                        <input type="text" id="faculty-name" placeholder="Faculty Name" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-clock"></i>
                        <input type="time" id="class-time" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-calendar-day"></i>
                        <select id="class-day" required>
                            <option value="">Select Day</option>
                            <option value="monday">Monday</option>
                            <option value="tuesday">Tuesday</option>
                            <option value="wednesday">Wednesday</option>
                            <option value="thursday">Thursday</option>
                            <option value="friday">Friday</option>
                            <option value="saturday">Saturday</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-layer-group"></i>
                        <select id="subject-type" required>
                            <option value="theory">Theory</option>
                            <option value="practical">Practical</option>
                            <option value="lab">Lab</option>
                        </select>
                    </div>

                    <!-- Theory specific fields -->
                    <div id="theory-section" class="theory-practical-section" style="display:none; margin-top:8px;">
                        <h4 style="margin:6px 0;">Theory Details</h4>
                        <div class="input-group">
                            <i class="fas fa-hourglass-half"></i>
                            <input type="number" id="theory-hours" placeholder="Theory Hours (per week)" min="0">
                        </div>
                        <div class="input-group">
                            <i class="fas fa-graduation-cap"></i>
                            <input type="number" id="theory-credits" placeholder="Theory Credits" min="0">
                        </div>
                        <div class="input-group">
                            <i class="fas fa-sticky-note"></i>
                            <input type="text" id="theory-notes" placeholder="Notes for theory (optional)">
                        </div>
                    </div>

                    <!-- Practical specific fields -->
                    <div id="practical-section" class="theory-practical-section" style="display:none; margin-top:8px;">
                        <h4 style="margin:6px 0;">Practical / Lab Details</h4>
                        <div class="input-group">
                            <i class="fas fa-hourglass-half"></i>
                            <input type="number" id="practical-hours" placeholder="Practical Hours (per week)" min="0">
                        </div>
                        <div class="input-group">
                            <i class="fas fa-map-marker-alt"></i>
                            <input type="text" id="practical-lab" placeholder="Lab / Room (optional)">
                        </div>
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="practical-instructor" placeholder="Practical Instructor (optional)">
                        </div>
                        <div class="input-group">
                            <i class="fas fa-sticky-note"></i>
                            <input type="text" id="practical-notes" placeholder="Notes for practical (optional)">
                        </div>
                    </div>

                    <button type="submit" class="primary-btn">
                        <span>Add Subject</span>
                        <i class="fas fa-plus"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Note Modal -->
    <div id="note-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Note for <span id="note-subject-name"></span></h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>Homework/Notes</label>
                    <textarea id="note-text" placeholder="Enter homework, notes, or what you learned in class..." rows="5"></textarea>
                </div>
                <button id="save-note" class="primary-btn">Save Note</button>
            </div>
        </div>
    </div>

    <!-- Import Data Modal -->
    <div id="import-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Import Data</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-instructions">
                    <h4>How to Import Data:</h4>
                    <p>1. Export your data first to see the format</p>
                    <p>2. Your data file should be a JSON file</p>
                    <p>3. Make sure the file structure matches the export format</p>
                </div>
                <div class="input-group">
                    <label>Select JSON File</label>
                    <input type="file" id="import-file" accept=".json">
                </div>
                <button id="confirm-import" class="primary-btn">Import Data</button>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notification-container" class="notification-container">
        <!-- Notifications will appear here -->
    </div>

    <div id="edit-modal" class="modal edit-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Edit <span id="edit-field-name">Field</span></h3>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <div class="edit-form">
                <div class="input-group">
                    <label for="edit-input">New Value</label>
                    <input type="text" id="edit-input" placeholder="Enter new value...">
                </div>
                <div class="form-buttons">
                    <button id="cancel-edit" class="cancel-btn">Cancel</button>
                    <button id="save-edit" class="primary-btn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Defensive fallback: ensure openEditModal exists so inline onclick won't throw
        if (typeof window.openEditModal !== 'function') {
            window.openEditModal = function(field) {
                try {
                    var editModal = document.getElementById('edit-modal');
                    var editInput = document.getElementById('edit-input');
                    var editLabel = document.getElementById('edit-field-name');
                    if (!editModal || !editInput || !editLabel) return;
                    var currentValue = (window.currentUser && window.currentUser[field]) ? window.currentUser[field] : '';
                    editInput.value = currentValue;
                    editInput.dataset.field = field;
                    var displayNames = { fullName: 'Full Name', studentId: 'Student ID', course: 'Course', semester: 'Semester' };
                    editLabel.textContent = displayNames[field] || field;
                    editModal.classList.add('active');
                    editModal.style.display = 'block';
                    setTimeout(function(){ editInput.focus(); }, 50);
                } catch (e) {
                    console.error('fallback openEditModal error:', e);
                }
            };
        }
    </script>
</body>
</html>